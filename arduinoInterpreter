/*
 This is some Arduino code to read signals from a 350Z steering
 wheel control module. So it can then pass a signal to the
 Raspberry Pi 3 GPIO pins, taking place of the factory head unit
*/
int volDown = 23;
int volUp = 24;
int seekDown = 25;
int seekUp = 26;
int buttonPower = 27;
int buttonMode = 28;

int signalWire1 = 19;
int signalWire2 = 22;

void setup() {
  // Setup the buttons with corresponding pins
  pinMode(signalWire1, INPUT);
  pinMode(signalWire2, INPUT);
  pinMode(volDown, OUTPUT);
  pinMode(volUp, OUTPUT);
  pinMode(seekDown, OUTPUT);
  pinMode(seekUp, OUTPUT);
  pinMode(buttonPower, OUTPUT);
  pinMode(buttonMode, OUTPUT);
}

void loop() {
  // Now this is the running portion of the program
  wheelWire1 = analogRead(signalWire1);
  wheelWire2 = analogRead(signalWire2);
  if(wheelWire1 > 900){
    digitalWrite(buttonMode, HIGH);
  }
  if(wheelWire1 > 700){
    digitalWrite(seekUp, HIGH);
  }
  if(wheelWire1 > 400){
    digitalWrite(volUp, HIGH);
  }
  else{
    digitalWrite(volUp, LOW);
    digitalWrite(seekUp, LOW);
    digitalWrite(buttonMode, LOW);
  }
  
  if(wheelWire2 > 900){
    digitalWrite(buttonPower, HIGH);
  }
  if(wheelWire2 > 700){
    digitalWrite(seekDown, HIGH);
  }
  if(wheelWire2 > 400){
    digitalWrite(volDown, HIGH);
  }
  else{
    digitalWrite(volDown, LOW);
    digitalWrite(seekDown, LOW);
    digitalWrite(buttonPower, LOW);
  }
  delay(100);
}
